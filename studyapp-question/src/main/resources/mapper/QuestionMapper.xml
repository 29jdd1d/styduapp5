<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.studyapp.question.mapper.QuestionMapper">

    <!-- 随机获取题目ID -->
    <select id="selectRandomIds" resultType="java.lang.Long">
        SELECT id FROM question
        WHERE status = 1
        <if test="majorId != null">
            AND major_id = #{majorId}
        </if>
        <if test="categoryId != null">
            AND category_id = #{categoryId}
        </if>
        ORDER BY RAND()
        LIMIT #{count}
    </select>

    <!-- 根据分类ID列表获取题目 -->
    <select id="selectByCategoryIds" resultType="com.studyapp.question.entity.Question">
        SELECT * FROM question
        WHERE status = 1
        AND category_id IN
        <foreach collection="categoryIds" item="categoryId" open="(" separator="," close=")">
            #{categoryId}
        </foreach>
        ORDER BY sort ASC, id ASC
        <if test="limit != null">
            LIMIT #{limit}
        </if>
    </select>

</mapper>
