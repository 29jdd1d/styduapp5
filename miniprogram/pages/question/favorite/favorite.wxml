<!--pages/question/favorite/favorite.wxml-->
<view class="favorite-page">
  <!-- 统计信息 -->
  <view class="stats-header">
    <view class="stat-item">
      <text class="stat-value">{{favoriteList.length}}</text>
      <text class="stat-label">收藏总数</text>
    </view>
  </view>

  <!-- 收藏列表 -->
  <scroll-view 
    class="favorite-list" 
    scroll-y 
    enhanced 
    show-scrollbar="{{false}}"
    refresher-enabled
    bindrefresherrefresh="onRefresh"
    refresher-triggered="{{isRefreshing}}"
  >
    <view 
      class="question-card"
      wx:for="{{favoriteList}}"
      wx:key="id"
      bindtap="goToDetail"
      data-question="{{item.question}}"
    >
      <view class="question-header">
        <view class="type-tag tag-{{item.question.type}}">{{item.question.typeText}}</view>
        <view class="unfavorite-btn" catchtap="removeFavorite" data-id="{{item.questionId}}">
          <text class="star-icon">★</text>
        </view>
      </view>
      <text class="question-content text-ellipsis-2">{{item.question.content}}</text>
    </view>

    <!-- 空状态 -->
    <view class="empty" wx:if="{{!loading && favoriteList.length === 0}}">
      <image class="empty-icon" src="/images/empty.png" mode="aspectFit"/>
      <text class="empty-text">暂无收藏</text>
      <text class="empty-desc">点击题目右上角的星星收藏题目</text>
    </view>

    <!-- 加载更多 -->
    <view class="load-more" wx:if="{{favoriteList.length > 0}}">
      <text wx:if="{{hasMore}}">加载中...</text>
      <text wx:else>没有更多了</text>
    </view>
  </scroll-view>

  <!-- 底部按钮 -->
  <view class="fixed-bottom" wx:if="{{favoriteList.length > 0}}">
    <button class="btn btn-primary" bindtap="startPractice">
      开始练习收藏 ({{favoriteList.length}})
    </button>
  </view>
</view>
