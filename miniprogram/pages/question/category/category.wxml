<!--pages/question/category/category.wxml-->
<view class="category-page">
  <!-- é¡¶éƒ¨ç»Ÿè®¡ -->
  <view class="stats-header">
    <view class="stat-item">
      <text class="stat-value">{{totalQuestions}}</text>
      <text class="stat-label">æ€»é¢˜æ•°</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{doneQuestions}}</text>
      <text class="stat-label">å·²åš</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{correctRate}}%</text>
      <text class="stat-label">æ­£ç¡®ç‡</text>
    </view>
  </view>

  <!-- å¿«æ·å…¥å£ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="startRandomPractice">
      <view class="action-icon random">ğŸ²</view>
      <text class="action-text">éšæœºåˆ·é¢˜</text>
    </view>
    <view class="action-item" bindtap="goToWrong">
      <view class="action-icon wrong">ğŸ“</view>
      <text class="action-text">é”™é¢˜æœ¬</text>
    </view>
    <view class="action-item" bindtap="goToFavorite">
      <view class="action-icon favorite">â­</view>
      <text class="action-text">æ”¶è—å¤¹</text>
    </view>
    <view class="action-item" bindtap="goToExam">
      <view class="action-icon exam">ğŸ“‹</view>
      <text class="action-text">æ¨¡æ‹Ÿè€ƒè¯•</text>
    </view>
  </view>

  <!-- åˆ†ç±»åˆ—è¡¨ -->
  <view class="category-section">
    <view class="section-header">
      <text class="section-title">é¢˜ç›®åˆ†ç±»</text>
    </view>
    
    <view class="category-list">
      <view 
        class="category-item"
        wx:for="{{categories}}"
        wx:key="id"
        bindtap="goToCategory"
        data-category="{{item}}"
      >
        <image class="category-icon" src="{{item.icon || '/images/default-category.png'}}" mode="aspectFit"/>
        <view class="category-info">
          <text class="category-name">{{item.name}}</text>
          <text class="category-count">{{item.questionCount || 0}}é¢˜</text>
        </view>
        <text class="category-arrow">â€º</text>
      </view>

      <!-- å­åˆ†ç±»å±•ç¤º -->
      <block wx:for="{{categories}}" wx:key="id" wx:for-item="parent">
        <view 
          class="sub-category-item"
          wx:for="{{parent.children}}"
          wx:key="id"
          wx:if="{{parent.expanded}}"
          bindtap="goToCategory"
          data-category="{{item}}"
        >
          <view class="sub-icon">â””</view>
          <view class="category-info">
            <text class="category-name">{{item.name}}</text>
            <text class="category-count">{{item.questionCount || 0}}é¢˜</text>
          </view>
          <text class="category-arrow">â€º</text>
        </view>
      </block>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:if="{{!loading && categories.length === 0}}">
      <image class="empty-icon" src="/images/empty.png" mode="aspectFit"/>
      <text class="empty-text">æš‚æ— é¢˜ç›®åˆ†ç±»</text>
    </view>
  </view>
</view>
