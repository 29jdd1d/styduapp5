<!--pages/question/list/list.wxml-->
<view class="list-page">
  <!-- 筛选栏 -->
  <view class="filter-bar">
    <view 
      class="filter-item {{currentType === 'all' ? 'active' : ''}}"
      bindtap="onTypeChange"
      data-type="all"
    >全部</view>
    <view 
      class="filter-item {{currentType === 1 ? 'active' : ''}}"
      bindtap="onTypeChange"
      data-type="1"
    >单选</view>
    <view 
      class="filter-item {{currentType === 2 ? 'active' : ''}}"
      bindtap="onTypeChange"
      data-type="2"
    >多选</view>
    <view 
      class="filter-item {{currentType === 3 ? 'active' : ''}}"
      bindtap="onTypeChange"
      data-type="3"
    >判断</view>
  </view>

  <!-- 题目列表 -->
  <scroll-view 
    class="question-list" 
    scroll-y 
    enhanced 
    show-scrollbar="{{false}}"
    refresher-enabled
    bindrefresherrefresh="onRefresh"
    refresher-triggered="{{isRefreshing}}"
  >
    <view 
      class="question-card"
      wx:for="{{questions}}"
      wx:key="id"
      bindtap="goToDetail"
      data-question="{{item}}"
      data-index="{{index}}"
    >
      <view class="question-header">
        <view class="question-type tag-{{item.type}}">{{item.typeText}}</view>
        <view class="question-difficulty tag-difficulty-{{item.difficulty}}">{{item.difficultyText}}</view>
      </view>
      <text class="question-content text-ellipsis-2">{{item.content}}</text>
      <view class="question-footer">
        <text class="question-source" wx:if="{{item.source}}">来源：{{item.source}}</text>
        <text class="question-year" wx:if="{{item.year}}">{{item.year}}年</text>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="empty" wx:if="{{!loading && questions.length === 0}}">
      <image class="empty-icon" src="/images/empty.png" mode="aspectFit"/>
      <text class="empty-text">暂无题目</text>
    </view>

    <!-- 加载更多 -->
    <view class="load-more" wx:if="{{questions.length > 0}}">
      <text wx:if="{{hasMore}}">加载中...</text>
      <text wx:else>没有更多了</text>
    </view>
  </scroll-view>

  <!-- 底部开始答题 -->
  <view class="fixed-bottom">
    <button 
      class="btn btn-primary"
      bindtap="startPractice"
      disabled="{{questions.length === 0}}"
    >开始答题 ({{questions.length}}题)</button>
  </view>
</view>
