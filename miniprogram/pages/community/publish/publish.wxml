<!--pages/community/publish/publish.wxml-->
<view class="publish-page">
  <scroll-view class="form-scroll" scroll-y enhanced show-scrollbar="{{false}}">
    <!-- 帖子类型 -->
    <view class="form-section">
      <view class="section-title">帖子类型</view>
      <view class="type-list">
        <view 
          class="type-item {{postType === '1' ? 'active' : ''}}"
          bindtap="selectType"
          data-type="1"
        >
          <text class="type-icon">📝</text>
          <text class="type-name">经验分享</text>
        </view>
        <view 
          class="type-item {{postType === '2' ? 'active' : ''}}"
          bindtap="selectType"
          data-type="2"
        >
          <text class="type-icon">❓</text>
          <text class="type-name">问题求助</text>
        </view>
        <view 
          class="type-item {{postType === '3' ? 'active' : ''}}"
          bindtap="selectType"
          data-type="3"
        >
          <text class="type-icon">📚</text>
          <text class="type-name">资料分享</text>
        </view>
        <view 
          class="type-item {{postType === '4' ? 'active' : ''}}"
          bindtap="selectType"
          data-type="4"
        >
          <text class="type-icon">💬</text>
          <text class="type-name">闲聊灌水</text>
        </view>
      </view>
    </view>

    <!-- 标题 -->
    <view class="form-section">
      <view class="section-title">标题</view>
      <input 
        class="title-input"
        placeholder="请输入标题（5-50字）"
        maxlength="50"
        value="{{title}}"
        bindinput="onTitleInput"
      />
      <view class="input-count">{{title.length}}/50</view>
    </view>

    <!-- 内容 -->
    <view class="form-section">
      <view class="section-title">内容</view>
      <textarea 
        class="content-input"
        placeholder="分享你的学习心得、问题或者任何想说的..."
        maxlength="5000"
        value="{{content}}"
        bindinput="onContentInput"
        auto-height
      />
      <view class="input-count">{{content.length}}/5000</view>
    </view>

    <!-- 图片上传 -->
    <view class="form-section">
      <view class="section-title">添加图片（可选，最多9张）</view>
      <view class="image-list">
        <view 
          class="image-item"
          wx:for="{{images}}"
          wx:key="*this"
        >
          <image class="preview-image" src="{{item}}" mode="aspectFill"/>
          <view class="delete-btn" catchtap="deleteImage" data-index="{{index}}">
            <text>×</text>
          </view>
        </view>
        <view 
          class="add-image-btn"
          wx:if="{{images.length < 9}}"
          bindtap="chooseImage"
        >
          <text class="add-icon">+</text>
          <text class="add-text">添加图片</text>
        </view>
      </view>
    </view>

    <!-- 发布须知 -->
    <view class="tips-section">
      <view class="tips-title">发布须知</view>
      <view class="tips-content">
        <text>1. 请遵守社区规范，文明发帖</text>
        <text>2. 禁止发布广告、违法违规内容</text>
        <text>3. 分享学习资料请注意版权问题</text>
        <text>4. 请友善交流，互相尊重</text>
      </view>
    </view>
  </scroll-view>

  <!-- 底部发布按钮 -->
  <view class="publish-bar">
    <view class="publish-btn {{canPublish ? 'active' : ''}}" bindtap="submitPost">
      发布帖子
    </view>
  </view>
</view>
