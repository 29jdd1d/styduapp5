<!--pages/course/list/list.wxml-->
<view class="course-page">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <view class="search-box">
      <icon type="search" size="16" color="#999"/>
      <input class="search-input" placeholder="搜索课程" bindinput="onSearch"/>
    </view>
  </view>

  <!-- 课程分类筛选 -->
  <scroll-view class="filter-scroll" scroll-x enhanced show-scrollbar="{{false}}">
    <view class="filter-list">
      <view 
        class="filter-item {{currentFilter === 'all' ? 'active' : ''}}"
        bindtap="onFilterChange"
        data-filter="all"
      >全部</view>
      <view 
        class="filter-item {{currentFilter === 'free' ? 'active' : ''}}"
        bindtap="onFilterChange"
        data-filter="free"
      >免费课程</view>
      <view 
        class="filter-item {{currentFilter === 'hot' ? 'active' : ''}}"
        bindtap="onFilterChange"
        data-filter="hot"
      >热门课程</view>
    </view>
  </scroll-view>

  <!-- 课程列表 -->
  <scroll-view 
    class="course-list" 
    scroll-y 
    enhanced 
    show-scrollbar="{{false}}"
    bindscrolltolower="loadMore"
    refresher-enabled
    bindrefresherrefresh="onRefresh"
    refresher-triggered="{{isRefreshing}}"
  >
    <view class="course-grid">
      <view 
        class="course-card"
        wx:for="{{courses}}"
        wx:key="id"
        bindtap="goToDetail"
        data-id="{{item.id}}"
      >
        <view class="cover-wrap">
          <image class="course-cover" src="{{item.cover || '/images/default-cover.png'}}" mode="aspectFill"/>
          <view class="free-tag" wx:if="{{item.isFree}}">免费</view>
        </view>
        <view class="course-content">
          <text class="course-title text-ellipsis-2">{{item.title}}</text>
          <view class="teacher-info">
            <image class="teacher-avatar" src="{{item.teacherAvatar || '/images/default-avatar.png'}}" mode="aspectFill"/>
            <text class="teacher-name">{{item.teacherName}}</text>
          </view>
          <view class="course-stats">
            <text class="stat-item">{{item.chapterCount}}章节</text>
            <text class="stat-item">{{item.videoCount}}视频</text>
            <text class="stat-item">{{item.viewCount}}人学习</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="empty" wx:if="{{!loading && courses.length === 0}}">
      <image class="empty-icon" src="/images/empty.png" mode="aspectFit"/>
      <text class="empty-text">暂无课程</text>
    </view>

    <!-- 加载更多 -->
    <view class="load-more" wx:if="{{courses.length > 0}}">
      <text wx:if="{{hasMore}}">加载中...</text>
      <text wx:else>没有更多了</text>
    </view>
  </scroll-view>
</view>
